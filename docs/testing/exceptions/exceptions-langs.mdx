---
title: "Testing de Excepciones en Otros Frameworks"
---

## JavaScript/TypeScript: Mocha

En el ecosistema de **JavaScript**/**TypeScript**, **Mocha** es uno de los frameworks de pruebas más utilizados. A continuación, veremos cómo se realiza el testing de excepciones en **Mocha** y compararemos las similitudes y diferencias con **Kotest** en Kotlin.

### Testing de Excepciones en Mocha

En **Mocha**, se utiliza la función `assert.throws` de la biblioteca de aserciones de **Node.js assert** o métodos de bibliotecas como **Chai** para verificar que se lance una excepción específica.

#### Usando Node.js assert

```typescript
import * as assert from 'assert';

function methodThatThrowsException(): void {
  throw new Error('Expected error message');
}

describe('Exception Test', function() {
  it('should throw an exception', function() {
    assert.throws(
      () => {
        methodThatThrowsException();
      },
      Error,
      'Expected error message'
    );
  });
});
```

En este ejemplo:

- **`assert.throws`**: Verifica que el bloque de código lanzado arroje una excepción del tipo especificado.
- Se puede proporcionar un mensaje de error para verificar detalles adicionales.

#### Usando Chai expect

Con la biblioteca **Chai** y su estilo **expect**, el código es más expresivo:

```typescript
import { expect } from 'chai';

function methodThatThrowsException(): void {
  throw new Error('Expected error message');
}

describe('Exception Test', function() {
  it('should throw an exception', function() {
    expect(() => methodThatThrowsException()).to.throw(Error, 'Expected error message');
  });
});
```

En este ejemplo:

- **`expect().to.throw()`**: Verifica que se lance una excepción del tipo y mensaje especificados.
- La sintaxis de Chai es más cercana al lenguaje natural, lo que hace que las pruebas sean más legibles.

### Similitudes con Kotest

- **Verificación de Excepciones**: Ambos frameworks permiten verificar que un bloque de código específico lanza una excepción esperada.
- **Captura y Aserciones**: Tanto en Mocha como en Kotest, es posible capturar la excepción y hacer aserciones adicionales, como verificar el mensaje de error.
- **Expresividad**: Ambos frameworks ofrecen formas claras y expresivas de escribir pruebas de excepciones.

### Diferencias con Kotest

- **Estructura del Código**: Mocha utiliza funciones de callback (`describe`, `it`) para estructurar las pruebas, mientras que Kotest utiliza lambdas, integrándose más naturalmente con Kotlin.
- **Funciones Disponibles**: Kotest ofrece múltiples funciones (`shouldThrow`, `shouldThrowExactly`, `shouldThrowAny`) para la verificación de excepciones, mientras que Mocha depende de bibliotecas de aserciones externas como **Chai** para un mayor control.
- **Soporte para BDD**: Kotest tiene soporte nativo para estilos de pruebas BDD como `FreeSpec`, mientras que en Mocha el soporte para BDD proviene de su uso con `describe` e `it`.

### Comparación General

| Aspecto                         | Kotest (Kotlin)                              | Mocha (TypeScript)                       |
|---------------------------------|----------------------------------------------|------------------------------------------|
| **Verificación de Excepciones** | `shouldThrow`, `shouldThrowExactly`, etc.    | `assert.throws` o `expect().to.throw()`  |
| **Estructura del Bloque**       | Uso de lambdas                               | Callbacks con `describe` e `it`          |
| **Flexibilidad**                | Varias funciones para diferentes necesidades | Uso de bibliotecas de aserciones         |
| **Estilo BDD**                  | Soporte nativo (e.g., `FreeSpec`)            | Soporte mediante funciones `describe`/`it` |

## JVM: JUnit

En el ecosistema de Java, **JUnit** es uno de los frameworks de pruebas más populares. A continuación, exploraremos cómo se realiza el testing de excepciones en JUnit y compararemos las similitudes y diferencias con **Kotest** en Kotlin.

### Testing de Excepciones en JUnit

En **JUnit 5**, se utiliza el método `assertThrows` para verificar que se lance una excepción específica al ejecutar un bloque de código.

```java
import static org.junit.jupiter.api.Assertions.assertThrows;
import static org.junit.jupiter.api.Assertions.assertEquals;

import org.junit.jupiter.api.Test;

class ExceptionTest {

    @Test
    void shouldThrowException() {
        Exception exception = assertThrows(IllegalArgumentException.class, () -> {
            // Código que se espera que lance IllegalArgumentException
            methodThatThrowsException();
        });
        // Verificar detalles de la excepción
        assertEquals("Expected error message", exception.getMessage());
    }
}
```

En este ejemplo:

- Se utiliza `assertThrows` para ejecutar el bloque de código que debe lanzar la excepción esperada.
- La excepción lanzada se captura en la variable `exception`, permitiendo realizar aserciones adicionales, como verificar el mensaje de error.

### Similitudes con Kotest

- **Verificación de Excepciones**: Ambos frameworks permiten comprobar que se lance una excepción específica al ejecutar un bloque de código.
- **Captura y Verificación**: Tanto en JUnit como en Kotest, es posible capturar la excepción y verificar detalles adicionales, como el mensaje de error.

### Diferencias con Kotest

- **Sintaxis y Expresividad**: Kotest aprovecha las características de Kotlin, como lambdas y funciones de orden superior, para proporcionar una sintaxis más concisa y expresiva.
- **Funciones Especializadas**: Kotest ofrece funciones como `shouldThrowExactly` y `shouldThrowAny`, brindando mayor flexibilidad en la verificación de excepciones.
- **Estilos de Prueba**: Kotest soporta estilos BDD (Behavior-Driven Development) como `FreeSpec` y `BehaviorSpec`, facilitando una estructura de pruebas más descriptiva y cercana al lenguaje natural. JUnit sigue un enfoque más tradicional basado en métodos.

### Comparación general

| Aspecto                         | Kotest (Kotlin)                              | JUnit (Java)                            |
|---------------------------------|----------------------------------------------|-----------------------------------------|
| **Verificación de Excepciones** | `shouldThrow`, `shouldThrowExactly`, etc.    | `assertThrows`                          |
| **Sintaxis**                    | Uso de lambdas                               | Uso de interfaces funcionales           |
| **Flexibilidad**                | Varias funciones para diferentes necesidades | Enfoque principal con `assertThrows`    |
| **Estilo BDD**                  | Soporte nativo (e.g., `FreeSpec`)            | No soportado nativamente                |

## Python: PyTest

En el mundo de Python, **PyTest** es uno de los frameworks de pruebas más utilizados. Veamos cómo se realiza el testing de excepciones en PyTest y cómo se compara con Kotest.

### Testing de Excepciones en PyTest

PyTest utiliza la construcción `pytest.raises()` dentro de un bloque `with` para verificar que se lance una excepción específica.

```python
import pytest

def method_that_throws_exception():
    raise ValueError("Expected error message")

def test_should_throw_exception():
    with pytest.raises(ValueError) as exc_info:
        # Código que se espera que lance ValueError
        methodThatThrowsException()
    # Verificar detalles de la excepción
    assert str(exc_info.value) == "Expected error message"
```

En este ejemplo:

- **`pytest.raises()`**: Se utiliza para asegurar que se lance una excepción del tipo especificado.
- **Captura de Excepción**: La excepción se captura en `exc_info`, permitiendo realizar aserciones sobre ella.

### Similitudes con Kotest

- **Verificación de Excepciones**: Ambos frameworks permiten verificar de manera concisa que se lance una excepción esperada.
- **Captura y Aserciones**: Posibilidad de capturar la excepción y hacer aserciones adicionales sobre su contenido, como el mensaje de error.
- **Expresividad**: Proporcionan formas legibles y claras de escribir pruebas de excepciones.

### Diferencias con Kotest

- **Estructura del Código**: PyTest utiliza un bloque `with` para manejar excepciones, mientras que Kotest utiliza lambdas, alineándose con el paradigma funcional de Kotlin.
- **Funciones Disponibles**: Kotest ofrece múltiples funciones (`shouldThrow`, `shouldThrowExactly`, `shouldThrowAny`) para mayor flexibilidad, mientras que PyTest principalmente utiliza `pytest.raises()`.
- **Soporte para BDD**: Kotest incluye soporte nativo para estilos BDD, permitiendo escribir pruebas más descriptivas y estructuradas. PyTest no ofrece soporte nativo para BDD, aunque puede lograrse mediante plugins externos.

### Comparación General

| Aspecto                         | Kotest (Kotlin)                              | PyTest (Python)                         |
|---------------------------------|----------------------------------------------|-----------------------------------------|
| **Verificación de Excepciones** | `shouldThrow`, `shouldThrowExactly`, etc.    | `pytest.raises()`                       |
| **Estructura del Bloque**       | Uso de lambdas                               | Bloque `with`                           |
| **Flexibilidad**                | Varias funciones para diferentes necesidades | Enfoque principal con `pytest.raises()` |
| **Estilo BDD**                  | Soporte nativo (e.g., `FreeSpec`)            | No soportado nativamente                |
