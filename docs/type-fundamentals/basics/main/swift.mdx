---
title: Punto de entrada en Swift
---
import { ProCons, Pros, Cons } from '@site/src/components/cajitas/ProCons'
import ExcludeFromReadingTime from '@site/src/components/reading-time/ExcludeFromReadingTime'
import ReadingTime from '@site/src/components/reading-time/ReadingTime'
import Explanation from '@site/src/components/admonitions/Explanation'
import RepoLinks from '@site/src/components/git/RepoLinks'
import GitLabRepo from '@site/src/components/git/GitLabRepo'
import GitHubRepo from '@site/src/components/git/GitHubRepo'
import ReferenceList from '@site/src/components/references/ReferenceList'
import Video from '@site/src/components/references/Video'
import WebPage from '@site/src/components/references/WebPage'

<ReadingTime />
<RepoLinks children={[
  <GitLabRepo user="r8vnhill" repo="swift-dibs" />,
  <GitHubRepo user="r8vnhill" repo="swift-dibs" />,
]} />

Swift est√° dise√±ado para permitirte comenzar r√°pidamente. A diferencia de otros lenguajes en los que siempre debes definir una funci√≥n `main`, en Swift puedes escribir c√≥digo directamente en un archivo llamado `main.swift`, que ser√° autom√°ticamente reconocido como el punto de entrada del programa.

Esto simplifica la escritura de scripts y herramientas peque√±as, sin sacrificar la posibilidad de estructurar programas m√°s complejos mediante anotaciones como `@main`. En esta lecci√≥n exploraremos ambas formas de definir el punto de entrada en Swift: la impl√≠cita (mediante c√≥digo a nivel superior) y la estructurada (usando `@main`). Tambi√©n aprender√°s c√≥mo recibir argumentos desde la l√≠nea de comandos, una herramienta clave para crear programas m√°s vers√°tiles.

Esta secci√≥n te prepara para escribir desde peque√±os scripts hasta aplicaciones modulares m√°s avanzadas, manteniendo siempre un enfoque idiom√°tico y reutilizable en el desarrollo de bibliotecas de software.

## üõ†Ô∏è ¬øC√≥mo ejecutar estos ejemplos?

Para ejecutar los ejemplos mostrados, es √∫til saber c√≥mo crear un proyecto b√°sico en Swift y estructurarlo en m√≥dulos reutilizables. Los siguientes recursos te guiar√°n paso a paso:

- üì¶ [Crear un Proyecto B√°sico en Swift](/docs/build-systems/init/swift)  
  Aprende a iniciar un proyecto desde cero con Swift Package Manager.
- üß© [Modularizar tu Proyecto Swift](/docs/build-systems/modular-design/swift)  
  Descubre c√≥mo dividir tu c√≥digo en m√≥dulos para mejorar la organizaci√≥n, reutilizaci√≥n y mantenibilidad.

## üß¨ Declaraci√≥n de `main` en Swift

En Swift, **no necesitas declarar una funci√≥n `main` de forma expl√≠cita** cuando escribes scripts o aplicaciones sencillas. El archivo `main.swift` se considera autom√°ticamente el punto de entrada, y **todo el c√≥digo que escribas a nivel superior se ejecuta directamente**.

```swift showLineNumbers title="main.swift ‚Äî ejecuci√≥n directa sin funci√≥n main"
print("What cannot change can only be broken.")
```

Este ejemplo[^1] muestra c√≥mo ejecutar un script simple directamente desde la terminal sin necesidad de definir una funci√≥n `main`:

```bash title="Desde la terminal"
swift run TypeFundamentals
```

[^1]: Inspirado en *Tokyo Ghoul*.

## üéØ Argumentos desde la terminal

Swift permite recibir **argumentos desde la terminal** para modificar din√°micamente el comportamiento de un programa. Esto es √∫til para crear herramientas reutilizables, probar componentes con distintos datos o construir scripts de ejemplo.

```swift showLineNumbers title="Script Swift con argumentos (Sources/TypeFundamentals/main.swift)"
let args = CommandLine.arguments.dropFirst()

if args.isEmpty {
    print("You know nothing, Jon Snow.")
} else {
    let name = args.joined(separator: " ")
    print("Winter is coming for you, \(name).")
}
```

<Explanation>
    Este script lee los argumentos desde la l√≠nea de comandos y genera un mensaje personalizado.

    - **`CommandLine.arguments`** es un arreglo de cadenas que incluye todos los argumentos con los que se invoc√≥ el programa. El primer elemento (`arguments[0]`) corresponde al nombre del ejecutable.
    - **`dropFirst()`** descarta ese primer elemento para obtener solo los argumentos √∫tiles.
    - Si no se entregan argumentos, se muestra un mensaje predeterminado.
    - Si hay uno o m√°s, se concatenan y se genera una respuesta personalizada.

    Este enfoque es equivalente al uso de `main(args: Array<String>)` en otros lenguajes como Kotlin, pero sin necesidad de declarar una funci√≥n `main`.
</Explanation>

Puedes ejecutar el script con:

```bash title="Desde la terminal"
swift run TypeFundamentals Syrio Forel
```

<details>
    <summary>
        Compatibilidad con sistemas de ejecuci√≥n
    </summary>

    En Swift, puedes definir el punto de entrada del programa utilizando un tipo anotado con `@main`, como una `struct` o `class`.  
    Este enfoque es √∫til cuando quieres estructurar tu aplicaci√≥n de forma m√°s formal o integrarla con herramientas de ejecuci√≥n externas.

    ```swift showLineNumbers title="Estructura con @main (Sources/TypeFundamentals/main.swift)"
    @main
    struct Launcher {
        static func main() {
            print("Static main detected.")
        }
    }
    ```

    :::info ¬øQu√© es `@main`?

    La anotaci√≥n `@main` indica que ese tipo define el **punto de entrada** del programa.  
    Se espera que incluya un m√©todo `static func main()` que se ejecute al iniciar el programa, como en Java (`public static void main`) o Kotlin (`@JvmStatic`).

    Puedes usar `@main` con una `struct`, `class` o `enum`.

    :::

    :::danger Error com√∫n: `'main' attribute cannot be used in a module that contains top-level code`

    Swift **no permite combinar `@main` con c√≥digo a nivel superior** (fuera de funciones o clases) en el mismo archivo.  
    Esto incluye incluso l√≠neas vac√≠as, comentarios sueltos o `print()` fuera de estructuras.

    ‚úÖ Aseg√∫rate de que el archivo que contiene el tipo con `@main` **no tenga ning√∫n otro c√≥digo fuera de ese tipo**.

    :::

</details>

## üÜö Resumen comparativo

| Caracter√≠stica                        | Kotlin                                                                 | Swift                                                                 |
|--------------------------------------|------------------------------------------------------------------------|-----------------------------------------------------------------------|
| ¬øRequiere una funci√≥n `main` expl√≠cita? | ‚úÖ S√≠, siempre debe declararse una funci√≥n `main`                      | ‚ùå No, el archivo `main.swift` ejecuta directamente el c√≥digo         |
| Forma b√°sica de punto de entrada      | `fun main()` o `fun main(args: Array<String>)`                         | C√≥digo a nivel superior en `main.swift`                               |
| Recepci√≥n de argumentos por consola   | `args: Array<String>`                                                  | `CommandLine.arguments`                                               |
| Herramienta de ejecuci√≥n              | Gradle (`./gradlew :moduleName:run --args="..."`)                             | SwiftPM (`swift run TargetName`)                                 |

<ProCons>
    <Pros title="Beneficios de Swift">
        - Permite escribir scripts simples sin declarar funciones o clases.
        - Sintaxis m√°s directa y concisa para casos r√°pidos o exploratorios.
        - El soporte de `@main` permite compatibilidad con binarios m√°s estructurados.
    </Pros>
    <Cons title="Limitaciones de Swift">
        - Menos expl√≠cito: el punto de entrada puede ser impl√≠cito, lo que puede generar confusi√≥n en proyectos grandes.
        - Errores sutiles si se mezcla `@main` con c√≥digo a nivel superior en el mismo archivo.
    </Cons>
</ProCons>

## üéØ Conclusiones

En esta lecci√≥n exploramos c√≥mo declarar y estructurar el punto de entrada en programas escritos en Swift, y c√≥mo esta forma resulta m√°s flexible y concisa que en lenguajes como Kotlin o Java.

Swift permite una experiencia de scripting m√°s directa gracias a la ejecuci√≥n de c√≥digo ubicado directamente en `main.swift`, sin necesidad de definir funciones expl√≠citas. Esta simplicidad lo hace ideal para scripts, experimentaci√≥n y prototipado r√°pido. Por otro lado, el uso de `@main` ofrece una estructura m√°s tradicional cuando se requiere mayor control o integraci√≥n con sistemas de ejecuci√≥n m√°s complejos (como pruebas, empaquetado o interoperabilidad con C).

Tambi√©n aprendimos a manejar argumentos desde la l√≠nea de comandos, una t√©cnica esencial para construir herramientas reutilizables, interactivas y f√°ciles de testear.

### üîë Puntos clave

- Se puede escribir c√≥digo directamente en `main.swift` sin definir una funci√≥n `main`.
- El acceso a argumentos desde la terminal se hace con `CommandLine.arguments.dropFirst()`.
- Se puede usar `@main` con una `struct`, `class` o `enum` que defina `static func main()` como punto de entrada.
- No es posible combinar `@main` con c√≥digo a nivel superior en el mismo archivo.
- `main.swift` es ideal para scripts, pero requiere una organizaci√≥n cuidadosa en proyectos grandes.

### üß∞ ¬øQu√© nos llevamos?

Swift ofrece un punto de entrada m√°s sencillo que muchos lenguajes tradicionales, lo que reduce el ruido sint√°ctico y permite una experiencia de desarrollo fluida desde el primer momento.

- Para scripts o herramientas peque√±as, destaca por su **inmediatez y expresividad**.
- Para aplicaciones estructuradas, `@main` permite un dise√±o m√°s robusto y expl√≠cito.
- Conocer las diferencias entre `main.swift`, `@main` y `CommandLine.arguments` es clave para aplicar la opci√≥n adecuada en cada caso.

El dise√±o de Swift refleja una decisi√≥n consciente: **permitir comenzar con sencillez, pero sin renunciar a la escalabilidad**. Esto lo convierte en una excelente opci√≥n tanto para scripts como para bibliotecas y herramientas modulares reutilizables.

## üìñ ¬øCon ganas de m√°s?

<ReferenceList title="üî• Referencias recomendadas" items={[
    <Video
        title="#1 Swift Programming - Application Entry Point - Main Function"
        url="https://youtu.be/onM2HuDacic"
        duration="4m29s"
        location="YouTube"
        author="Davids Videos"
    >
        Este video explica c√≥mo definir el punto de entrada de una aplicaci√≥n en Swift. Comienza mostrando el uso tradicional del archivo <code>main.swift</code>, donde el compilador espera encontrar el c√≥digo de inicio, y luego presenta una alternativa mediante el uso de la anotaci√≥n <code>@main</code> en una estructura o clase que implemente una funci√≥n <code>static func main()</code>. Tambi√©n se aclaran las restricciones de Swift respecto al uso de expresiones a nivel superior fuera del archivo principal, y se muestra c√≥mo evitar conflictos si hay m√∫ltiples anotaciones <code>@main</code>.
    </Video>
]}  />
<ReferenceList title="üîπ Referencias adicionales" items={[
    <WebPage
        title=<code>arguments</code>
        url="https://developer.apple.com/documentation/swift/commandline/arguments"
        location="Apple Developer"
    >
        Explica c√≥mo acceder a los argumentos de l√≠nea de comandos en Swift usando <code>CommandLine.arguments</code>. Describe su uso en programas ejecutables, donde el primer argumento corresponde al nombre del programa, y muestra un ejemplo pr√°ctico de c√≥mo procesar argumentos para construir una herramienta simple. Compatible con m√∫ltiples plataformas (macOS, iOS, watchOS, etc.).
    </WebPage>
]}  />
