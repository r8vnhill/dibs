---
title: Excepciones
---
import References from "@site/src/components/ReferencesComponent";
import ReadingTime from "@site/src/components/ReadingTime";
import LanguageCard from "@site/src/components/cards/LanguageCard";

<ReadingTime />

En esta lección, nos enfocaremos en la **sintaxis** y particularidades de las excepciones en **Kotlin**. Si ya tienes experiencia con excepciones en otros lenguajes, encontrarás que el manejo de excepciones en Kotlin sigue patrones familiares, pero con algunas diferencias notables.

## Lanzar Excepciones

Para **lanzar** una excepción en Kotlin, usamos la palabra clave `throw`. Esta parte es muy similar a otros lenguajes como Java o C#. Aquí tienes un ejemplo sencillo:

```kotlin showLineNumbers
fun divide(a: Int, b: Int): Int {
    if (b == 0) {
        throw IllegalArgumentException("Cannot divide by zero")
    }
    return a / b
}
```

## Capturar Excepciones

Para capturar excepciones, utilizamos el una **expresión** `try-catch`. El formato es similar a otros lenguajes, con algunas mejoras en la sintaxis:

```kotlin showLineNumbers
fun safeDivide(a: Int, b: Int) = try {
    a / b
} catch (e: ArithmeticException) {
    println("Error: ${e.message}")
    null
}
```

### Bloque `finally`

El bloque `finally` es opcional y se ejecuta independientemente de si una excepción fue lanzada o no. Se usa típicamente para la limpieza de recursos.

```kotlin showLineNumbers
fun readFile(path: String) = try {
    // Leer archivo
    "File content"  // Este valor se retornará si no hay excepciones
} catch (e: Exception) {
    "Error: ${e.message}"
} finally {
    println("Cleaning up resources")
}
```

## Propagación de Excepciones

Si no capturas una excepción, esta se propagará hacia la función llamante, lo cual es idéntico a otros lenguajes. Como no hay excepciones chequeadas en Kotlin, no es necesario declarar las excepciones que una función podría lanzar, pero se puede documentar en la firma de la función.

```kotlin showLineNumbers
@Throws(RuntimeException::class)    // Opcional: Documenta que la función lanza una excepción
fun riskyOperation() {
    throw RuntimeException("Something went wrong")
}

fun main() {
    riskyOperation() // La excepción se propagará y finalizará el programa si no se captura
}
```

## Excepciones Personalizadas

Al igual que en otros lenguajes, puedes crear tus propias excepciones heredando de `Exception` o `RuntimeException`:

```kotlin showLineNumbers
class CustomException(message: String) : Exception(message)

fun validateAge(age: Int) {
    if (age < 18) {
        throw CustomException("Age must be 18 or older")
    }
}
```

## Resumen

En Kotlin, el manejo de excepciones sigue un patrón familiar si vienes de otros lenguajes como Java o C#. Las principales diferencias son la ausencia de excepciones chequeadas y el uso preferente de tipos anulables o monadas como `Result` para manejar errores de manera más controlada y funcional.

<div className="language-card-container">
    <LanguageCard
        logoSrc="https://upload.wikimedia.org/wikipedia/commons/thumb/c/c3/Python-logo-notext.svg/800px-Python-logo-notext.svg.png"
        language="Python"
        link="python"
    />
    <LanguageCard
        logoSrc="https://www.svgrepo.com/show/184143/java.svg"
        language="Java"
        link="java"
    />
</div>

<References references={[
    {
        title: "2. Kotlin basics",
        bookTitle: "Kotlin in action",
        pages: "17–43",
        location: "Shelter Island, NY",
        publisher: "Manning Publications Co",
        year: "2017",
        type: "book",
        author: 'Dmitry Jemerov & Svetlana Isakova'
    },
]}/>
