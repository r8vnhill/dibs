---
title: Funciones de Extensión
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import ReadingTime from '@site/src/components/ReadingTime';

<ReadingTime />

Las **funciones de extensión** te permiten añadir nuevas funcionalidades a clases existentes sin necesidad de herencia o modificar el código original. Estas extensiones son resueltas de manera estática, lo que significa que no alteran la clase en sí.

```kotlin
fun String.replaceSpaces(replacement: String): String {
    return this.replace(" ", replacement)
}
```

En este caso, extendemos la clase `String` con un método para reemplazar espacios por un carácter especificado.

### Funciones de Extensión en Scala 3

En **Scala 3**, las funciones de extensión han sido introducidas como una forma más clara de extender clases. Ya no es necesario utilizar `implicits` como en Scala 2.

#### Ejemplo en Scala 3

```scala
extension (s: String)
  def replaceSpaces(replacement: String): String = s.replace(" ", replacement)
```

Aquí estamos definiendo una función de extensión para la clase `String` que reemplaza los espacios con un carácter o cadena de texto que se pasa como argumento.

#### Uso en Scala 3

```scala
@main def main() =
  val text = "Hello World"
  println(text.replaceSpaces("_")) // Output: Hello_World
```

Al igual que en Kotlin, una vez definida, puedes usar la función de extensión como si fuera parte de la clase original.

### Funciones de Extensión en Scala 2 (con `implicits`)

En **Scala 2**, se utilizaban los `implicits` para lograr algo similar a las funciones de extensión. Aunque el concepto es un poco más complejo, lograba el mismo resultado.

#### Ejemplo en Scala 2

```scala
implicit class StringOps(s: String) {
  def replaceSpaces(replacement: String): String = s.replace(" ", replacement)
}
```

El uso de `implicit class` es la clave aquí. Define una clase que extiende la funcionalidad de `String`.

#### Uso en Scala 2

```scala
object Main extends App {
  val text = "Hello World"
  println(text.replaceSpaces("_"))  // Output: Hello_World
}
```

### Funciones de Extensión en C#

En **C#**, las funciones de extensión son comunes y se usan para agregar métodos a tipos existentes. Estas funciones están definidas como métodos estáticos en una clase estática, pero se invocan como si fueran métodos de instancia.

#### Ejemplo en C#

```csharp
public static class StringExtensions {
    public static string ReplaceSpaces(this string s, string replacement) {
        return s.Replace(" ", replacement);
    }
}
```

La palabra clave `this` en el primer parámetro indica que esta es una función de extensión para la clase `string`.

#### Uso en C#

```csharp
class Program {
    static void Main() {
        string text = "Hello World";
        Console.WriteLine(text.ReplaceSpaces("_"));  // Output: Hello_World
    }
}
```

Al igual que en Kotlin y Scala, la función se invoca como si fuera un método de instancia de la clase `string`.

### Operadores de Extensión

Kotlin y Scala también permiten sobrecargar operadores a través de funciones de extensión. Esto puede ser útil para definir comportamientos personalizados.

#### Kotlin: Definición de Operador de Extensión

```kotlin
operator fun String.times(n: Int): String = this.repeat(n)
```

#### Scala 3: Operador de Extensión

En Scala 3, también puedes sobrecargar operadores de forma similar:

```scala
extension (s: String)
  def *(n: Int): String = s * n
```

### Propiedades de Extensión

Kotlin permite definir **propiedades de extensión**. Aunque estas propiedades funcionan como getters y setters, no almacenan estado, sino que se calculan dinámicamente.

#### Kotlin: Propiedad de Extensión

```kotlin
val String.wordCount: Int
    get() = this.split("""\s+""".toRegex()).size
```

:::tip Ejercicio: Contar Vocales

<Tabs>
  <TabItem value="Ejercicio" label="Ejercicio">
    Desarrolla una función de extensión countVowels que cuente y devuelva el número de vocales en un String
  </TabItem>
  
  <TabItem value="Solución" label="Solución">
```kotlin
fun String.countVowels(): Int {
    val vowels = setOf('a', 'e', 'i', 'o', 'u')
    var count = 0
    for (char in this) {
        if (char.lowercaseChar() in vowels) {
            count++
        }
    }
    return count
}
```
  </TabItem>

  <TabItem value="Solución (más corta)" label="Solución (más corta)">
```kotlin
fun String.countVowels() = count { it in "aeiou" }
```
  </TabItem>
</Tabs>
:::
