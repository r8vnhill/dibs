---
title: Creando un Proyecto B√°sico con Nx  
---

import GitHubRepoLink from "@site/src/components/GithubRepoLink";
import References from "@site/src/components/ReferencesComponent";
import ReadingTime from '@site/src/components/ReadingTime';
import * as LanguageCards from '@site/src/components/cards/LanguageCard'
import { ProCons, Pros, Cons } from '@site/src/components/cajitas/ProCons'
import BoxedTabs from '@site/src/components/cajitas/BoxedTabs'
import TabItem from '@theme/TabItem';
import Explanation from '@site/src/components/admonitions/Explanation'
                         
<ReadingTime/>
<GitHubRepoLink repo={"echo-app-nx"} user={"r8vnhill"} />

Al igual que con Gradle, es importante partir con una buena base para estructurar proyectos TypeScript o JavaScript. En este caso, exploraremos c√≥mo hacerlo con **Nx**, una herramienta de construcci√≥n monorepo dise√±ada para manejar m√∫ltiples aplicaciones y bibliotecas dentro de un solo repositorio, con un enfoque en productividad, escalabilidad y buenas pr√°cticas.

En esta unidad crearemos un proyecto con Nx que contenga una biblioteca compartida y una aplicaci√≥n de consola que la utilice.

Buena observaci√≥n. Si vas a utilizar `pnpm` para instalar y ejecutar **Nx**, no es estrictamente necesario usar `npx`, porque `pnpm dlx` cumple una funci√≥n muy similar. Entonces, podr√≠as simplificar la explicaci√≥n sobre `npx` o incluso omitirla completamente si el flujo que ense√±ar√°s usa `pnpm` desde el inicio.

## üß∞ Paso -1: Instalar Node.js

Antes de usar **Nx**, necesitas tener instalado **Node.js**, ya que es el entorno de ejecuci√≥n necesario para las herramientas del ecosistema JavaScript/TypeScript (incluyendo `pnpm`, `npm` y `nx`).

<BoxedTabs groupId={"os"}>
  <TabItem value="Windows" label="Windows">
    ```powershell
    scoop install nodejs
    ```

    <Explanation>
      Instala Node.js (y con ello tambi√©n `npm`) usando Scoop, un gestor de paquetes para Windows. Una vez instalado, podr√°s usar herramientas como `pnpm`, `dlx` y `nx` desde la terminal.
    </Explanation>
  </TabItem>

  <TabItem value="macOS" label="macOS">
    ```bash
    brew install node
    ```

    <Explanation>
      Instala Node.js en macOS usando Homebrew. Esto incluye autom√°ticamente `npm`, que podr√°s usar para instalar `pnpm` y otras herramientas necesarias para el desarrollo con Nx.
    </Explanation>
  </TabItem>

  <TabItem value="Linux" label="Linux">
    ```bash
    curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.7/install.sh | \
      bash && \
      source ~/.nvm/nvm.sh && \
      nvm install --lts && \
      nvm use --lts && \
      nvm alias default 'lts/*'
    ```

    <Explanation>
      Este comando instala y configura NVM (Node Version Manager), una herramienta para gestionar versiones de Node.js:

      - `curl ... | bash`: Descarga e instala NVM.
      - `source ~/.nvm/nvm.sh`: Habilita NVM en tu terminal actual.
      - `nvm install --lts`: Instala la √∫ltima versi√≥n LTS (Long Term Support) de Node.js.
      - `nvm use --lts`: Activa esa versi√≥n.
      - `nvm alias default 'lts/*'`: Define esa versi√≥n como predeterminada.

      Una vez hecho esto, ya podr√°s usar `npm` para instalar `pnpm` y otras herramientas necesarias.
    </Explanation>
  </TabItem>
</BoxedTabs>

### ‚úÖ Verifica que la instalaci√≥n fue exitosa

Aseg√∫rate de que Node.js est√© disponible ejecutando:

```bash
node --version
```

Si obtienes un n√∫mero de versi√≥n, ¬°ya est√°s listx para continuar!

## üì¶ Paso 0: Instalar `pnpm`

[`pnpm`](https://pnpm.io) es un gestor de paquetes moderno para el ecosistema de Node.js. A diferencia de `npm` o `yarn`, utiliza una estructura basada en enlaces simb√≥licos que evita duplicar dependencias, lo que se traduce en instalaciones m√°s r√°pidas y eficientes.

Es especialmente √∫til en proyectos **monorepo**, como los que se construyen con Nx, porque:

- üìÇ Reduce significativamente el espacio ocupado en `node_modules`.
- üöÄ Acelera la instalaci√≥n de dependencias.
- üß∞ Ofrece una alternativa a `npx` llamada `pnpm dlx`, ideal para ejecutar herramientas temporales como `create-nx-workspace` sin instalarlas globalmente.

```bash
npm install -g pnpm
```

<Explanation>
    Instala `pnpm` globalmente usando `npm`. Esto te permitir√° usar comandos como `pnpm dlx` para crear proyectos sin necesidad de instalaciones adicionales.
</Explanation>

### ‚úÖ Verifica que la instalaci√≥n fue exitosa

Ejecuta el siguiente comando para verificar que `pnpm` se instal√≥ correctamente:

```bash
pnpm --version
```

Si ves un n√∫mero de versi√≥n, ¬°todo est√° en orden!

## üß± Paso 1: Crear el Proyecto Base con Nx

```bash
pnpm dlx create-nx-workspace@latest echo-app-nx
```

<Explanation>
    Ejecuta `create-nx-workspace` usando `pnpm dlx`, una alternativa moderna a `npx`.

    - `pnpm dlx`: Ejecuta un paquete directamente desde el registro, sin necesidad de instalarlo globalmente.
    - `create-nx-workspace@latest`: Usa la √∫ltima versi√≥n del generador de workspaces de Nx.
    - `echo-app-nx`: Es el nombre del directorio que se crear√° y tambi√©n el nombre del proyecto base.

    Este comando descargar√° e iniciar√° el generador de Nx, te har√° una serie de preguntas interactivas y crear√° la estructura inicial del proyecto.
</Explanation>

## üß© Paso 2: Seleccionar la Pila Tecnol√≥gica

Durante la creaci√≥n del workspace, Nx te preguntar√° qu√© tipo de **stack** deseas utilizar. Ver√°s una pregunta como la siguiente:

```text
? Which stack do you want to use? ...
‚ùØ None:          Configures a TypeScript/JavaScript monorepo.
  React:         Configures a React application with your framework of choice.
  Vue:           Configures a Vue application with your framework of choice.
  Angular:       Configures an Angular application with modern tooling.
  Node:          Configures a Node API application with your framework of choice.
```

<Explanation>
    La opci√≥n `None` configura un workspace vac√≠o pero funcional, adecuado para gestionar m√∫ltiples proyectos TypeScript o JavaScript sin incluir frameworks espec√≠ficos como React o Angular.

    Elegir esta opci√≥n te permite tener control total sobre c√≥mo y cu√°ndo agregar tus aplicaciones y bibliotecas dentro del workspace, ideal para entender c√≥mo funciona Nx desde sus fundamentos.
</Explanation>

## üé® Paso 3: Elegir un Formateador de C√≥digo

Nx te preguntar√° si deseas incluir **Prettier** como herramienta de formateo autom√°tico del c√≥digo fuente:

```text
? Would you like to use Prettier for code formatting?
‚ùØ Yes
  No
```

<Explanation>
    Prettier es una herramienta ampliamente utilizada para mantener el c√≥digo consistente, aplicando reglas autom√°ticas de estilo (espaciado, indentaci√≥n, uso de comillas, etc.).

    Al elegir **Yes**, Nx incluir√° autom√°ticamente su configuraci√≥n b√°sica y un conjunto de comandos √∫tiles para aplicarlo al proyecto. Esto es especialmente √∫til cuando m√∫ltiples personas colaboran en el mismo repositorio.
</Explanation>

## üîÅ Paso 4: Seleccionar un proveedor de CI (opcional)

Durante la configuraci√≥n, Nx te preguntar√° si deseas configurar un proveedor de **Integraci√≥n Continua (CI)**:

```text
? Which CI provider would you like to use?
  GitHub Actions
  Gitlab
  Azure DevOps
  BitBucket Pipelines
  Circle CI
‚ùØ Do it later
```

<Explanation>
    Para este ejercicio, selecciona **Do it later**.

    Nx permite generar autom√°ticamente archivos de configuraci√≥n para varios proveedores de CI. Sin embargo, si est√°s empezando o quieres mantener tu proyecto simple, puedes omitir esta parte por ahora y agregarla m√°s adelante cuando lo necesites.
</Explanation>

## ‚ö° Paso 5: Habilitar cach√© remota (opcional)

Durante la instalaci√≥n, Nx ofrece la opci√≥n de habilitar **cach√© remota**, una funcionalidad que puede acelerar tus builds y tareas compartidas entre equipos:

```text
? Would you like remote caching to make your build faster?
(can be disabled any time)
  Yes
‚ùØ No - I would not like remote caching
```

<Explanation>
    Seleccionar **Yes** habilita el cach√© remoto de Nx, que permite reutilizar resultados de compilaci√≥n, pruebas y tareas en diferentes entornos o equipos de trabajo, lo cual mejora el rendimiento del proyecto en equipos colaborativos.

    Para este curso o pruebas locales, puedes elegir **No** sin problema. Esta opci√≥n se puede cambiar m√°s adelante si decides integrar Nx Cloud.
</Explanation>

## üìÅ Estructura del Proyecto Generado

```mermaid
graph LR
    root["üì¶ echo-app-nx/"]

    root --> vscode["üß© .vscode/"]
    root --> nxdir["‚öôÔ∏è .nx/"]
    root --> node_modules["üìÅ node_modules/"]
    root --> packages["üìÅ packages/"]

    root --> gitignore["üìÑ .gitignore"]
    root --> npmrc["üßæ .npmrc"]
    root --> prettierignore["üìÑ .prettierignore"]
    root --> prettierrc["üìù .prettierrc"]
    root --> nxjson["‚öôÔ∏è nx.json"]
    root --> packageJson["üì¶ package.json"]
    root --> pnpmLock["üîí pnpm-lock.yaml"]
    root --> pnpmWorkspace["üóÇÔ∏è pnpm-workspace.yaml"]
    root --> readme["üìò README.md"]
    root --> tsconfigBase["‚öôÔ∏è tsconfig.base.json"]
    root --> tsconfig["‚öôÔ∏è tsconfig.json"]
```

:::info Explicaci√≥n de la Estructura

- **üì¶ `echo-app-nx/`**: Carpeta ra√≠z del proyecto.
- **üß© `.vscode/`**: Configuraciones espec√≠ficas de VS Code.
- **‚öôÔ∏è `.nx/`**: Carpeta interna utilizada por Nx para almacenar informaci√≥n de tareas y resultados de an√°lisis.
- **üìÅ `node_modules/`**: Directorio que contiene todas las dependencias instaladas.
- **üìÅ `packages/`**: Carpeta pensada para contener aplicaciones y bibliotecas creadas dentro del monorepo.

- **üìÑ `.gitignore`**: Define qu√© archivos deben ser ignorados por Git.
- **üßæ `.npmrc`**: Configuraciones espec√≠ficas para `npm` o `pnpm`, como el registro o preferencias de instalaci√≥n.
- **üìÑ `.prettierignore`**: Archivos que Prettier debe ignorar al formatear.
- **üìù `.prettierrc`**: Configuraci√≥n del formateador de c√≥digo Prettier.
- **‚öôÔ∏è `nx.json`**: Archivo principal de configuraci√≥n de Nx (proyectos, tags, tareas, etc.).
- **üì¶ `package.json`**: Archivo que define las dependencias y scripts del proyecto.
- **üîí `pnpm-lock.yaml`**: Archivo de bloqueo que asegura versiones exactas al instalar dependencias.
- **üóÇÔ∏è `pnpm-workspace.yaml`**: Define qu√© carpetas componen el monorepo (como `packages/`).
- **üìò `README.md`**: Documento inicial con instrucciones o descripci√≥n del proyecto.
- **‚öôÔ∏è `tsconfig.base.json`**: Configuraci√≥n base de TypeScript compartida por todos los proyectos del monorepo.
- **‚öôÔ∏è `tsconfig.json`**: Punto de entrada para la configuraci√≥n de TypeScript, generalmente extiende la base.

:::

## üó£Ô∏è Paso 6: Crear una Aplicaci√≥n

Vamos a crear una peque√±a aplicaci√≥n de consola en TypeScript dentro de nuestro workspace que diga algo como:

> ‚ÄúAre you not entertained?!‚Äù

Esta ser√° nuestra primera aplicaci√≥n dentro del monorepo, y servir√° como una forma simple de verificar que todo est√° funcionando correctamente.

### üì¶ Instalar Nx en el Proyecto

Desde la ra√≠z del proyecto `echo-app-nx` (recuerda hacer `cd echo-app-nx` si no lo has hecho), ejecuta los siguientes comandos:

```bash
pnpm add -D nx @nx/node
pnpm approve-builds
```

```text
‚àö Choose which packages to build (Press <space> to select, <a> to toggle all, <i> to invert selection) ¬∑ nx

‚àö The next packages will now be built: nx.
Do you approve? (y/N) ¬∑ true
```

<Explanation>
    Este paso instala `nx` y el plugin `@nx/node`, necesario para crear aplicaciones en Node.js dentro del workspace.

    - `pnpm add -D nx @nx/node`: agrega Nx y su plugin para apps Node como dependencias de desarrollo.
    - `pnpm approve-builds`: aprueba los paquetes que requieren construcci√≥n posterior a su instalaci√≥n. Nx lo solicita para que funcione correctamente con `pnpm`.

    Este paso es **obligatorio** cuando usas `pnpm` con Nx, ya que la instalaci√≥n puede requerir pasos de *postbuild* expl√≠citos.
</Explanation>

<details>
    <summary>üöÄ ¬øPrefieres instalar Nx globalmente?</summary>

    Tambi√©n puedes instalar Nx de forma global si prefieres usar el comando `nx` directamente en cualquier parte del sistema:

    ```bash
    pnpm add -g nx
    ```

    Esto te permitir√° ejecutar comandos como `nx build` o `nx serve` sin necesidad de anteponer `pnpm`.

    :::tip
    
    Sin embargo, usar la versi√≥n local garantiza que todas las personas del equipo est√©n usando la misma versi√≥n de Nx definida en el proyecto.

    :::
</details>

### üõ†Ô∏è Crear una aplicaci√≥n llamada `arena`

```bash
pnpm nx g @nx/node:app arena --directory=packages/arena
```

<Explanation>
    Este comando genera una nueva aplicaci√≥n llamada `arena` dentro del directorio `packages/arena`, utilizando el generador de Nx para proyectos Node.js.

    - `@nx/node:app`: Indica que se usar√° el generador para aplicaciones Node.js.
    - `arena`: Es el nombre de la aplicaci√≥n.
    - `--directory=packages/arena`: Especifica la carpeta donde se ubicar√° la app (`packages/arena`).
</Explanation>

---

Durante la ejecuci√≥n, Nx te har√° una serie de preguntas para personalizar tu aplicaci√≥n:

```text
? Which linter would you like to use? ‚Ä¶
‚ùØ eslint
  none

? Which unit test runner would you like to use? ‚Ä¶
‚ùØ jest
  none

? Which end-to-end test runner would you like to use? ‚Ä¶
  jest
‚ùØ none

? Which framework do you want to use? ‚Ä¶
  express
  fastify
  koa
  nest
‚ùØ none
```

<Explanation>
    Nx te permite configurar herramientas opcionales para mejorar la calidad y mantenibilidad del proyecto:

    - **Linter (`eslint`)**: Analiza tu c√≥digo en busca de errores y aplica reglas de estilo. Seleccionar `eslint` es una buena pr√°ctica para mantener un estilo consistente.
    - **Test runner (`jest`)**: Nx puede generar configuraci√≥n para pruebas unitarias y de extremo a extremo (e2e) usando Jest. Para este proyecto, puedes elegir `jest` para unit tests y `none` para e2e si no los necesitas a√∫n.
    - **Framework**: Si planeas crear una API o servidor web, puedes elegir un framework como `express`. Para una app de consola, selecciona `none`.

    Estas opciones se pueden modificar m√°s adelante, as√≠ que no te preocupes si cambias de idea.
</Explanation>

<details>
    <summary>üîç Comparaci√≥n: ESLint vs. Detekt</summary>

    Tanto **ESLint** como **Detekt** son herramientas de an√°lisis est√°tico, dise√±adas para detectar errores, malas pr√°cticas y estilos inconsistentes en el c√≥digo.

    | Caracter√≠stica       | ESLint (JS/TS)                          | Detekt (Kotlin)                           |
    |----------------------|-----------------------------------------|-------------------------------------------|
    | Lenguaje objetivo    | JavaScript / TypeScript                 | Kotlin                                     |
    | Configuraci√≥n        | Archivos `.eslintrc`, `.eslint.config.mjs`, etc. | Archivos `detekt.yml`, `build.gradle.kts` |
    | Integraci√≥n          | Nx, Vite, Webpack, VSCode               | Gradle, IntelliJ, Android Studio          |
    | Plugins              | Muy extensible (comunidad activa)       | Varios plugins disponibles                 |
    | Reglas personalizadas| S√≠                                      | S√≠                                        |
    | Autoformateo         | Opcional (usualmente junto a Prettier)  | Parcial (prefiere integraci√≥n con `ktlint`) |

    **ESLint** se enfoca en la estructura del c√≥digo y estilos comunes en el ecosistema JS/TS, mientras que **Detekt** apunta a detectar _code smells_, convenciones idiom√°ticas y problemas espec√≠ficos del lenguaje Kotlin.
</details>

### üìÇ ¬øQu√© contiene la nueva aplicaci√≥n?

```mermaid
graph LR
    root["üì¶ packages/arena-app/"]

    root --> src["üìÅ src/"]
    src --> main["üìÑ main.ts"]
    src --> assets["üìÅ assets/"]
    assets --> gitkeep["üìÑ .gitkeep"]

    root --> eslint["‚öôÔ∏è eslint.config.mjs"]
    root --> jest["üß™ jest.config.ts"]
    root --> specSwcrc["‚öôÔ∏è .spec.swcrc"]
    root --> pkgJson["üì¶ package.json"]
    root --> tsconfig["‚öôÔ∏è tsconfig.json"]
    root --> tsconfigApp["‚öôÔ∏è tsconfig.app.json"]
    root --> tsconfigSpec["‚öôÔ∏è tsconfig.spec.json"]
```

:::info Explicaci√≥n de la Estructura

Este diagrama muestra la estructura de archivos que genera Nx al crear una nueva aplicaci√≥n con el generador `@nx/node:app`:

- `src/`: Carpeta que contiene el c√≥digo fuente de la aplicaci√≥n.
- `main.ts`: Punto de entrada principal del programa.
- `assets/`: Carpeta para recursos est√°ticos. El archivo `.gitkeep` asegura que la carpeta exista en el repositorio aunque est√© vac√≠a.
- `package.json`: Define las dependencias y scripts espec√≠ficos de esta aplicaci√≥n.
- `eslint.config.mjs`: Configuraci√≥n de ESLint para an√°lisis est√°tico del c√≥digo.
- `jest.config.ts`: Configuraci√≥n para pruebas unitarias con Jest.
- `.spec.swcrc`: Configuraci√≥n de compilaci√≥n para los tests.
- `tsconfig*.json`: Configuraciones espec√≠ficas de TypeScript para compilaci√≥n (`app`), pruebas (`spec`) y referencias comunes (`tsconfig.json`).

:::

### ‚úçÔ∏è Modifica el archivo `main.ts`

```ts title="packages/arena-app/src/main.ts"
console.log("Are you not entertained?!");
```

### üöÄ Ejecuta la aplicaci√≥n

Desde la ra√≠z del proyecto, ejecuta:

<BoxedTabs groupId={"os"}>
    <TabItem value="Windows" label="Windows">
        ```powershell
        pnpm nx run @echo-app-nx/arena-app:build && `
            node packages/arena-app/dist/packages/arena-app/src/main.js
        ```
    </TabItem>
    <TabItem value="Linux/macOS" label="Linux/Mac">
        ```bash
        pnpm nx run @echo-app-nx/arena-app:build && \
            node packages/arena-app/dist/packages/arena-app/src/main.js        
        ```
    </TabItem>
</BoxedTabs>

<Explanation>
    - `pnpm nx run @echo-app-nx/arena-app:build`: Compila el proyecto de la aplicaci√≥n llamada `arena-app`, que se encuentra en el workspace `@echo-app-nx`. El resultado se coloca dentro del subdirectorio `dist/` siguiendo la estructura del proyecto.
    - `node packages/arena-app/dist/packages/arena-app/src/main.js`: Ejecuta directamente el archivo de salida generado por la compilaci√≥n. Nx transpila el archivo `main.ts` y lo ubica en esa ruta para mantener consistencia con la estructura del workspace.
</Explanation>

Si todo ha ido bien, deber√≠as ver el siguiente mensaje en la consola:

```text
Are you not entertained?!
```

## üéØ Conclusiones

En esta lecci√≥n exploramos c√≥mo crear un proyecto b√°sico usando **Nx** junto a **pnpm**, construyendo una aplicaci√≥n modular y escalable en TypeScript.

A lo largo del proceso, aprendiste a configurar tu entorno, crear el workspace, generar una aplicaci√≥n simple y ejecutar su c√≥digo ‚Äî todo dentro del contexto de un **monorepo moderno**.

### üîë Puntos clave

- **Instalaci√≥n moderna**: Usamos `pnpm` como gestor de paquetes por su rendimiento y compatibilidad con estructuras monorepo.
- **Workspace flexible**: Nx permite comenzar con un stack vac√≠o (`None`) para tener mayor control y flexibilidad.
- **Generaci√≥n guiada**: Nx facilita la creaci√≥n de apps y bibliotecas a trav√©s de comandos interactivos.
- **Estructura predecible**: Cada aplicaci√≥n queda organizada en su propio directorio con configuraci√≥n, dependencias y c√≥digo fuente bien separados.
- **Compilaci√≥n y ejecuci√≥n clara**: El resultado de la compilaci√≥n respeta la jerarqu√≠a del proyecto, lo que permite ubicar f√°cilmente los archivos generados.

### üß∞ ¬øQu√© nos llevamos?

Con esta lecci√≥n no solo dimos nuestros primeros pasos con **Nx**, sino que sentamos las bases para trabajar en proyectos organizados, escalables y mantenibles. Aprendimos a usar herramientas modernas como `pnpm` y a navegar por las decisiones que propone Nx al iniciar un workspace. A trav√©s de la construcci√≥n de una peque√±a aplicaci√≥n, tambi√©n comenzamos a explorar c√≥mo estructurar un monorepo con buenas pr√°cticas desde el principio.

M√°s all√° del resultado ‚Äîuna app que imprime una frase memorable‚Äî, lo que realmente nos llevamos es la comprensi√≥n de c√≥mo dar forma a nuestros proyectos con intenci√≥n, utilizando herramientas que nos invitan a pensar en modularidad, automatizaci√≥n y calidad desde el d√≠a uno.

Ahora que hemos abierto la arena, es momento de preparar las bibliotecas que har√°n brillar nuestras aplicaciones.

## üìñ Referencias

### üî• Recomendadas

- üåê React Monorepo Tutorial. (s.¬†f.). Nx. Recuperado 29 de marzo de 2025, de https://nx.dev/getting-started/tutorials/react-monorepo-tutorial
