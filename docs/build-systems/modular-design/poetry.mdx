---
title: Configuraciones B√°sicas de Proyectos Multi-M√≥dulo en Python con Poetry
---
import ReadingTime from '@site/src/components/ReadingTime'
import { ProCons, Pros, Cons } from '@site/src/components/cajitas/ProCons'
import References from '@site/src/components/ReferencesComponent'
import Tabs from '@theme/Tabs'
import TabItem from '@theme/TabItem'
import Exercise from '@site/src/components/exercise/Exercise'
import Solution from '@site/src/components/exercise/Solution'
import Hint from '@site/src/components/exercise/Hint'
import Definition from '@site/src/components/Definition'
import Corollary from '@site/src/components/Corollary'
import GitHubRepoLink from '@site/src/components/git/GitHubRepoLink'
import { LanguageCard } from '@site/src/components/cards/LanguageCard'
import Explanation from '@site/src/components/admonitions/Explanation'
import RepoClone from '@site/src/components/admonitions/RepoClone'
import ModuleSetup from '@site/src/components/cajitas/ModuleSetup'
import BoxedTabs from '@site/src/components/cajitas/BoxedTabs'

<ReadingTime />
<GitHubRepoLink user="r8vnhill" repo="echo-app-poetry" />

**Poetry** es una herramienta moderna para gestionar dependencias y empaquetar proyectos en Python. Simplifica la instalaci√≥n de paquetes, la gesti√≥n de versiones y la publicaci√≥n en PyPI, todo desde un √∫nico archivo de configuraci√≥n (`pyproject.toml`).  
En esta lecci√≥n, aprenderemos a utilizar Poetry para configurar proyectos multi-m√≥dulo y gestionar dependencias, comparando su funcionalidad con herramientas similares como Gradle.

## Instalaci√≥n de Poetry

Para instalar Poetry en tu sistema, ejecuta:

<BoxedTabs>
    <TabItem value="Windows" label="Windows">
        ```powershell
        (Invoke-WebRequest -Uri https://install.python-poetry.org -UseBasicParsing).Content | py -
        ```
    </TabItem>
    <TabItem value="Windows (corto)" label="Windows (corto)">
        ```powershell
        (iwr https://install.python-poetry.org -UseBasicParsing).Content | py -
        ```
    </TabItem>
    <TabItem value="Linux/Mac" label="Linux/Mac">
        ```bash
        curl -sSL https://install.python-poetry.org | python3 -
        ```
    </TabItem>
</BoxedTabs>

Despu√©s de la instalaci√≥n, aseg√∫rate de agregar Poetry a tu `PATH` reiniciando tu terminal o siguiendo las instrucciones que proporciona el instalador.

Verifica la instalaci√≥n ejecutando:

```bash
poetry --version
```

## Crear un Proyecto con Poetry

Poetry facilita la creaci√≥n de proyectos. Para iniciar un nuevo proyecto, usa:

```bash
poetry new echo-app-poetry
```

Esto generar√° una estructura b√°sica con un archivo `pyproject.toml` en la ra√≠z del proyecto, que contiene la configuraci√≥n principal del proyecto, incluyendo las dependencias, el nombre, la versi√≥n, y otros metadatos. Esta estructura es similar a la de `build.gradle.kts` y `settings.gradle.kts` en Gradle.

```toml title="pyproject.toml"
[tool.poetry]
name = "echo-app-poetry"
version = "1.0.0"
description = "A simple echo app using Poetry"
authors = ["r8vnhill <reachme@ravenhill.cl>"]
readme = "README.md"

[tool.poetry.dependencies]
python = "^3.13.2"


[build-system]
requires = ["poetry-core"]
build-backend = "poetry.core.masonry.api"
```

## Proyectos Multi-M√≥dulo en Poetry

A diferencia de herramientas como **Gradle**, **Poetry no tiene soporte nativo** para proyectos multi-m√≥dulo. Sin embargo, es posible organizar un proyecto con m√∫ltiples m√≥dulos utilizando **dependencias locales** dentro del archivo `pyproject.toml`. 

En este enfoque, cada m√≥dulo tiene su propio `pyproject.toml`, y los m√≥dulos pueden referenciarse entre s√≠ mediante la opci√≥n `{ path = "<ruta>" }`. Esto permite definir configuraciones y dependencias espec√≠ficas para cada m√≥dulo sin necesidad de publicarlos en PyPI.

### Estructura del Proyecto

Supongamos que tenemos un proyecto llamado **`echo-app-poetry`**, compuesto por dos m√≥dulos:
- **`app/`**: Contiene la l√≥gica principal de la aplicaci√≥n.
- **`lib/`**: Un m√≥dulo independiente que proporciona funciones reutilizables.

La estructura del proyecto ser√≠a:

```mermaid
graph TD;
    A[echo-app-poetry] --> B[poetry.lock]
    A --> C[pyproject.toml]
    A --> D[app]
    D --> D1[pyproject.toml]
    D --> D2[src]
    D2 --> D3[app]
    D3 --> D4[main.py]
    D3 --> D5[__init__.py]
    A --> E[lib]
    E --> E1[pyproject.toml]
    E --> E2[src]
    E2 --> E3[lib]
    E3 --> E4[utils.py]
    E3 --> E5[__init__.py]
```

### Configuraci√≥n del M√≥dulo Ra√≠z

El archivo `pyproject.toml` en la ra√≠z del proyecto define las dependencias principales y las referencias a los m√≥dulos internos (`app` y `lib`).

```toml title="pyproject.toml"
[tool.poetry]
name = "echo-app-poetry"
version = "1.0.0"
description = "A simple echo app using Poetry"
authors = ["r8vnhill <reachme@ravenhill.cl>"]
readme = "README.md"

[tool.poetry.dependencies]
python = "^3.13.2"
app = { path = "app", develop = true }
lib = { path = "lib", develop = true }

[build-system]
requires = ["poetry-core"]
build-backend = "poetry.core.masonry.api"
```

Aqu√≠, `app` y `lib` se definen como **dependencias locales** usando `{ path = "<ruta>" }`, con la opci√≥n `develop = true` para indicar que son m√≥dulos en desarrollo.

### Configuraci√≥n de los M√≥dulos `app` y `lib`

Cada m√≥dulo necesita su propio `pyproject.toml`, donde se pueden declarar dependencias adicionales.

#### üìÅ `app/pyproject.toml`
```toml title="app/pyproject.toml"
[tool.poetry]
name = "app"
version = "1.0.0"
description = "Main application module"
authors = ["r8vnhill <reachme@ravenhill.cl>"]

[tool.poetry.dependencies]
python = "^3.13.2"
lib = { path = "../lib", develop = true }  # Dependencia local a lib
```

#### üìÅ `lib/pyproject.toml`
```toml title="lib/pyproject.toml"
[tool.poetry]
name = "lib"
version = "1.0.0"
description = "Utility library module"
authors = ["r8vnhill <reachme@ravenhill.cl>"]

[tool.poetry.dependencies]
python = "^3.13.2"
```

### Evitar Bucles en las Dependencias

Al configurar m√≥dulos en un proyecto multi-m√≥dulo, es importante **evitar dependencias c√≠clicas**. Un **bucle de dependencia** ocurre cuando:
- `app` depende de `lib`
- `lib` tambi√©n depende de `app`

Esto generar√° errores en Poetry y puede hacer que el entorno de desarrollo sea inconsistente. Para evitarlo:

‚úÖ **Define relaciones de dependencia de manera unidireccional**  
‚úÖ **Extrae funcionalidades comunes en m√≥dulos independientes**  
‚úÖ **Reconsidera la arquitectura si detectas ciclos innecesarios**

### Ejecutando el Proyecto üöÄ

Una vez configurados los m√≥dulos, instala todas las dependencias del proyecto, incluyendo los m√≥dulos locales, con:

```bash
poetry install --no-root
```

<details>
    <summary>
        ¬øPor qu√© `--no-root`?
    </summary>
    
    Este flag evita instalar el paquete ra√≠z en s√≠ mismo dentro del entorno virtual. Es √∫til en proyectos multi-m√≥dulo, ya que **solo instala las dependencias** sin tratar al m√≥dulo principal como una dependencia m√°s.
</details>

Despu√©s de la instalaci√≥n, puedes verificar que los m√≥dulos est√°n accesibles ejecutando:

```bash
poetry run python -c "import app, lib; print('M√≥dulos cargados correctamente')"
```

### Configuraci√≥n del M√≥dulo Ra√≠z

El archivo `pyproject.toml` en el m√≥dulo ra√≠z define las dependencias del proyecto principal e incluye referencias a los m√≥dulos `app` y `lib`. Este archivo podr√≠a verse de la siguiente manera:

```toml title="pyproject.toml"
[tool.poetry]
name = "echo-app-poetry"
version = "1.0.0"
description = "A simple echo app using Poetry"
authors = ["r8vnhill <reachme@ravenhill.cl>"]
readme = "README.md"

[tool.poetry.dependencies]
python = "^3.13.2"

[build-system]
requires = ["poetry-core"]
build-backend = "poetry.core.masonry.api"
```

En este archivo, las dependencias de `app` y `lib` se declaran con la opci√≥n `develop = true` para que se traten como m√≥dulos en desarrollo dentro del proyecto principal.

### Configuraci√≥n de los M√≥dulos `app` y `lib`

Cada m√≥dulo define su propio archivo `pyproject.toml` con sus dependencias y metadatos. Los archivos `pyproject.toml` en `app` y `lib` podr√≠an configurarse como sigue:

```toml title="app/pyproject.toml"
[tool.poetry]
name = "app"
version = "1.0.0"
description = "A subproject for the app"
authors = ["Ignacio Slater <reachme@ravenhill.cl>"]

[tool.poetry.dependencies]
python = "^3.13.2"
```

```toml title="lib/pyproject.toml"
[tool.poetry]
name = "lib"
version = "1.0.0"
description = "A subproject for the lib"
authors = ["Ignacio Slater <reachme@ravenhill.cl>"]

[tool.poetry.dependencies]
python = "^3.13.2"
```

## Gesti√≥n de Dependencias en Poetry

Para agregar una dependencia en Poetry, utiliza el comando:

```bash
poetry add <nombre-dependencia>
```

Este comando actualiza el archivo `pyproject.toml`, donde Poetry gestiona versiones y configuraciones de dependencias, similar al archivo `libs.versions.toml` en Gradle.

Por ejemplo, para a√±adir **Flask** a tu proyecto, ejecuta:

```bash
poetry add flask
```

Esto agregar√° **Flask** a las dependencias de tu proyecto y actualizar√° el archivo `pyproject.toml` autom√°ticamente:

```toml title="pyproject.toml"
[tool.poetry.dependencies]
python = "^3.13.2"
app = { path = "app", develop = true }
lib = { path = "lib", develop = true }
flask = "^3.0.3"
```

Con este sistema, **Poetry** permite un control centralizado de todas las versiones y dependencias del proyecto, manteni√©ndolas en un solo archivo de configuraci√≥n.

## Resumen Comparativo

Aunque Poetry y Gradle son herramientas de gesti√≥n de dependencias, cada una est√° dise√±ada para su propio ecosistema. Mientras Gradle ofrece un amplio soporte para m√∫ltiples lenguajes y configuraciones avanzadas, Poetry se centra exclusivamente en la simplicidad y eficiencia para proyectos Python. Veamos una comparaci√≥n de sus caracter√≠sticas clave:

| **Caracter√≠stica**                          | **Poetry**                                                                                               | **Gradle**                                                                                               |
|---------------------------------------------|----------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------|
| **Gesti√≥n de dependencias**                 | Las dependencias se agregan con `poetry add`, lo que actualiza `pyproject.toml` de forma centralizada.  | Utiliza `implementation`, `api`, y otros keywords en `build.gradle(.kts)`, controlando dependencias por m√≥dulo. |
| **Soporte para multi-m√≥dulos**              | Permite configurar m√∫ltiples m√≥dulos mediante subdirectorios con sus propios archivos `pyproject.toml`. | Configura m√∫ltiples m√≥dulos en `settings.gradle(.kts)`, permitiendo estructura jer√°rquica en m√≥dulos ra√≠z y subm√≥dulos. |
| **Configuraci√≥n de versiones**              | Usa `pyproject.toml` para definir versiones, similares a `libs.versions.toml` en Gradle.                 | Puede gestionar versiones con `versions` o `libs.versions.toml` en combinaci√≥n con el sistema de versiones. |
| **Compatibilidad y flexibilidad**           | Compatible con proyectos Python, centr√°ndose en simplificar la configuraci√≥n y gesti√≥n de paquetes.      | Compatible con m√∫ltiples lenguajes (Java, Kotlin, Android), permitiendo configuraciones complejas y plugins. |
| **Control centralizado del proyecto**       | Centraliza la configuraci√≥n en `pyproject.toml` a nivel ra√≠z, f√°cil de leer y modificar.                 | Centraliza configuraciones globales en `build.gradle(.kts)`, adaptable para cada m√≥dulo en `settings.gradle(.kts)`. |
| **Compatibilidad con PyPI/Maven**           | Directamente compatible con PyPI para la publicaci√≥n de paquetes de Python.                              | Directamente compatible con Maven Central y otros repositorios Java para la publicaci√≥n de bibliotecas. |
| **Instalaci√≥n de herramientas**             | Instala dependencias y herramientas de desarrollo con `poetry install`.                                 | Usa `gradlew build` para compilar y `gradlew dependencies` para gestionar dependencias locales.

### Beneficios y Limitaciones de Poetry

<ProCons>
    <Pros>
        - **Configuraci√≥n Sencilla y Centralizada**: Poetry centraliza la configuraci√≥n de dependencias y metadatos del proyecto en `pyproject.toml`, facilitando la gesti√≥n y lectura del estado del proyecto.
        - **Soporte para Proyectos Multi-M√≥dulo**: Poetry permite definir subproyectos o m√≥dulos con sus propios archivos `pyproject.toml`, lo que ayuda a gestionar dependencias y configuraciones de forma independiente dentro de un mismo proyecto.
        - **Gesti√≥n de Versiones Simplificada**: Con comandos como `poetry add <nombre-dependencia>`, es f√°cil a√±adir, actualizar y administrar versiones de dependencias de manera centralizada.
        - **Compatibilidad Directa con PyPI**: Poetry permite publicar paquetes en PyPI, lo cual es conveniente para desarrolladores de Python que quieren distribuir sus proyectos sin configuraciones adicionales.
        - **Entornos de Desarrollo Virtuales**: Crea autom√°ticamente entornos virtuales aislados para cada proyecto, asegurando una mayor estabilidad y consistencia entre diferentes entornos.
    </Pros>
    <Cons>
        - **Compatibilidad Limitada con Otros Lenguajes**: A diferencia de Gradle, Poetry est√° dise√±ado exclusivamente para proyectos de Python, lo cual restringe su uso en proyectos multi-lenguaje.
        - **Soporte Limitado para Scripts de Construcci√≥n Personalizados**: Poetry carece de un sistema de scripting tan avanzado como Gradle, limitando su personalizaci√≥n en flujos de construcci√≥n complejos.
        - **Dependencias Externas Limitadas en Proyectos Multi-M√≥dulo**: En comparaci√≥n con Gradle, Poetry puede presentar limitaciones al gestionar dependencias complejas o internas en grandes proyectos con m√∫ltiples m√≥dulos interdependientes.
        - **Menos Integraci√≥n con IDEs**: Aunque compatible con IDEs comunes de Python, su integraci√≥n y soporte no est√°n tan optimizados como en herramientas m√°s veteranas, lo cual puede limitar ciertas configuraciones avanzadas.
        - **Falta de Plugins y Extensiones**: Poetry no cuenta con un ecosistema amplio de plugins, lo cual puede ser una limitante para proyectos que requieren configuraciones avanzadas o funcionalidades espec√≠ficas.
    </Cons>
</ProCons>

## üìå Conclusiones  

En esta lecci√≥n, exploramos c√≥mo **Poetry** facilita la gesti√≥n de dependencias y la configuraci√≥n de proyectos **multi-m√≥dulo** en Python. Aunque no ofrece soporte **nativo** para proyectos multi-m√≥dulo como Gradle, es posible estructurar proyectos organizados mediante **dependencias locales**, permitiendo un control claro de cada m√≥dulo y sus relaciones.

### üîë Puntos clave  

1. **Gesti√≥n centralizada de dependencias**  
   - Poetry permite administrar paquetes de manera estructurada con `pyproject.toml`, simplificando la instalaci√≥n y actualizaci√≥n de librer√≠as.  
2. **Organizaci√≥n de proyectos multi-m√≥dulo**  
   - Aunque Poetry no tiene una arquitectura multi-m√≥dulo integrada, se puede lograr mediante dependencias locales y archivos `pyproject.toml` individuales para cada m√≥dulo.  
3. **Evitando dependencias c√≠clicas**  
   - Es crucial definir relaciones de dependencia **de manera unidireccional** para evitar bucles que puedan generar errores en la instalaci√≥n o dificultar la gesti√≥n del c√≥digo.  
4. **Comparaci√≥n con Gradle**  
   - Mientras Gradle est√° dise√±ado para la flexibilidad y el soporte multi-lenguaje, Poetry se enfoca exclusivamente en **Python**, ofreciendo una soluci√≥n m√°s sencilla pero con menos opciones avanzadas de personalizaci√≥n.  
5. **Manejo eficiente de entornos**  
   - Poetry crea autom√°ticamente **entornos virtuales aislados**, lo que facilita el control de dependencias sin interferir con otros proyectos o configuraciones del sistema.  

### ‚úÖ Reflexi√≥n final  

Poetry es una excelente opci√≥n para proyectos Python que buscan una soluci√≥n **moderna y centralizada** para la gesti√≥n de dependencias. Si bien su enfoque en Python lo hace menos flexible que herramientas como Gradle, su simplicidad y facilidad de uso lo convierten en una herramienta poderosa para el desarrollo estructurado y modular.  

Para proyectos m√°s complejos con m√∫ltiples dependencias internas, es importante planificar cuidadosamente la estructura del proyecto y evitar ciclos de dependencia. Con una correcta configuraci√≥n, **Poetry puede ser una alternativa eficiente y escalable para la gesti√≥n de proyectos en Python**. üöÄ

<References references={[
    {
        title: "Dependency Management With Python Poetry ‚Äì Real Python",
        url: "https://realpython.com/dependency-management-python-poetry/",
        type: "article",
        author: "Philipp Acsany",
        publishedDate: "15 de diciembre de 2024",
    },
]} additionalReferences={[
    {
        title: "Poetry‚ÄîPython dependency management and packaging made easy",
        url: "https://python-poetry.org/",
        accessedDate: "1 de noviembre de 2024",
        type: "web",
    },
]}/>
