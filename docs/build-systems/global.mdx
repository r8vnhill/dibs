---
title: Configuraciones globales
---
import ReadingTime from '@site/src/components/ReadingTime'
import { ProCons, Pros, Cons } from '@site/src/components/cajitas/ProCons'
import References from '@site/src/components/ReferencesComponent'
import Tabs from '@theme/Tabs'
import TabItem from '@theme/TabItem'
import Exercise from '@site/src/components/exercise/Exercise'
import Solution from '@site/src/components/exercise/Solution'
import Hint from '@site/src/components/exercise/Hint'
import Definition from '@site/src/components/Definition'
import Corollary from '@site/src/components/Corollary'
import GithubRepoLink from '@site/src/components/GithubRepoLink'
import { LanguageCard } from '@site/src/components/cards/LanguageCard'
import Explanation from '@site/src/components/admonitions/Explanation'
import RepoClone from '@site/src/components/admonitions/RepoClone'
import ModuleSetup from '@site/src/components/cajitas/ModuleSetup'
import BoxedTabs from '@site/src/components/cajitas/BoxedTabs'

<ReadingTime />
<GithubRepoLink user="r8vnhill" repo="echo-app-kt" />

Antes de continuar con tareas m√°s avanzadas como la organizaci√≥n en m√≥dulos o la publicaci√≥n de artefactos, es importante establecer una **configuraci√≥n global clara y coherente** para el proyecto. Esto asegura que todos los subm√≥dulos compartan valores comunes, evita repeticiones y mejora el rendimiento general de Gradle.

En esta lecci√≥n aprender√°s a usar el archivo `gradle.properties` para definir propiedades reutilizables ‚Äîcomo la cantidad de memoria asignada a la JVM, el uso de la cach√© de tareas o el identificador del grupo del proyecto‚Äî y a referenciar esas propiedades desde `build.gradle.kts`. Esta pr√°ctica es fundamental para mantener un proyecto limpio, mantenible y preparado para escalar.

## üÜî ¬øQu√© es el *grupo* del proyecto?

El **grupo** en Gradle es una cadena que identifica de forma √∫nica a un proyecto dentro de un ecosistema de artefactos.  
Por convenci√≥n, se utiliza un **formato de dominio invertido** (por ejemplo, `cl.ravenhill`) para evitar colisiones con proyectos de otras personas u organizaciones.

Este valor se combina con el nombre del proyecto y su versi√≥n para generar el **identificador completo del artefacto**, que se utiliza al publicarlo en un repositorio.

:::tip ¬øY si no tengo un dominio?

No necesitas tener un dominio propio. Una alternativa com√∫n es usar tu nombre de usuario de GitHub en el formato  
`com.github.username`.

:::

## üßæ `gradle.properties`

Para mantener las configuraciones globales de forma organizada y centralizada, crearemos un archivo llamado `gradle.properties` en la ra√≠z del proyecto. Este archivo permite definir propiedades reutilizables en todos los archivos de configuraci√≥n, tanto para par√°metros de ejecuci√≥n como para variables globales o de entorno.

```properties title="gradle.properties" showLineNumbers
# Par√°metros de la JVM
org.gradle.jvmargs=-Xmx4g -XX:+HeapDumpOnOutOfMemoryError -Dfile.encoding=UTF-8
systemProp.org.gradle.jvmargs=-Xmx4g -XX:+HeapDumpOnOutOfMemoryError -Dfile.encoding=UTF-8

# Configuraciones de rendimiento
org.gradle.caching=true
org.gradle.parallel=true
org.gradle.daemon=true

# Grupo del proyecto (ajusta seg√∫n tu dominio o nombre de usuario)
echo.group = cl.ravenhill
```

<Explanation>
    - **`org.gradle.jvmargs`**: Configura los argumentos de la JVM usados por Gradle. En este caso, asigna un m√°ximo de 4‚ÄØGB de memoria y habilita el [volcado de heap](https://es.wikipedia.org/wiki/Volcado_de_memoria) en caso de error de memoria.
    - **`org.gradle.caching`, `org.gradle.parallel`, `org.gradle.daemon`**: Activan optimizaciones importantes como la cach√© de tareas, ejecuci√≥n en paralelo y el uso de un daemon para mantener Gradle en memoria entre ejecuciones.
    - **`echo.group`**: Propiedad personalizada que define el grupo del proyecto. Se reutiliza en `build.gradle.kts` para establecer un identificador √∫nico del artefacto.
</Explanation>

## üìú `build.gradle.kts`

En el archivo `build.gradle.kts`, usamos las propiedades definidas en `gradle.properties` para establecer el **grupo** y la **versi√≥n** del proyecto. Tambi√©n aplicamos el plugin de convenciones que encapsula la configuraci√≥n com√∫n para todos los m√≥dulos.

```kotlin title="build.gradle.kts" showLineNumbers
plugins {
    id("jvm.conventions") // Aplica el plugin de convenciones para JVM
}

val projectGroup = project.findProperty("echo.group")?.toString()
    ?: error("The property 'echo.group' is not defined in gradle.properties")
val projectVersion = libs.versions.echo.get()

allprojects {
    group = projectGroup
    version = projectVersion
}
```

<Explanation>
    - **Aplicaci√≥n del plugin de convenciones**: La l√≠nea `id("jvm.conventions")` aplica el plugin que contiene configuraciones comunes para proyectos basados en la JVM. Esto ayuda a centralizar y reutilizar comportamientos entre todos los m√≥dulos.
    - **Obtener el grupo del proyecto**:  `project.findProperty("echo.group")?.toString()` para intentar obtener el valor de la propiedad `echo.group` definida en `gradle.properties`. Esta funci√≥n devuelve `null` si la propiedad no est√° definida, por lo que a√±adimos `?: error(...)` para lanzar una excepci√≥n en caso de que falte. Esto permite realizar una **validaci√≥n temprana** y evitar errores silenciosos durante la compilaci√≥n.
    - **Obtener la versi√≥n del proyecto**: Se utiliza `libs.versions.echo.get()` para extraer la versi√≥n del proyecto desde el cat√°logo de versiones (`libs.versions.toml`). Esto garantiza consistencia en todos los m√≥dulos que dependan de esta informaci√≥n.
    - **Aplicar configuraci√≥n a todos los subproyectos**: El bloque `allprojects { ... }` asegura que tanto el **grupo** como la **versi√≥n** definidos se apliquen a todos los subm√≥dulos del proyecto. Esto es especialmente √∫til en entornos multi-m√≥dulo para mantener una configuraci√≥n coherente y centralizada.
</Explanation>

## üéØ Conclusiones

En esta lecci√≥n exploramos c√≥mo establecer configuraciones globales reutilizables en proyectos Gradle. Vimos c√≥mo aprovechar `gradle.properties` para definir par√°metros importantes como el grupo del proyecto, opciones de rendimiento y configuraciones de la JVM, y c√≥mo referenciar esas propiedades desde `build.gradle.kts` para aplicarlas de forma centralizada.

Este enfoque no solo facilita el mantenimiento y la legibilidad del proyecto, sino que tambi√©n ayuda a preparar una base s√≥lida y coherente para escalar hacia proyectos con m√∫ltiples m√≥dulos y flujos de publicaci√≥n automatizados.

### üîë Puntos clave

- **`gradle.properties`** permite definir propiedades globales reutilizables que pueden ser accedidas desde cualquier archivo de construcci√≥n del proyecto.
- El **grupo del proyecto** se utiliza como parte del identificador del artefacto y suele seguir la convenci√≥n de dominio invertido (`cl.ravenhill`, `com.github.usuario`).
- Propiedades como `org.gradle.caching`, `org.gradle.parallel` y `org.gradle.daemon` mejoran significativamente el rendimiento de Gradle.
- Es importante validar expl√≠citamente la existencia de propiedades cr√≠ticas con `findProperty(...) ?: error(...)`, para evitar errores silenciosos.
- El uso de `allprojects { ... }` asegura que la configuraci√≥n global se aplique a todos los subm√≥dulos del proyecto.

### üß∞ ¬øQu√© nos llevamos?

Definir propiedades globales puede parecer un detalle menor al comienzo de un proyecto, pero es una decisi√≥n que rinde frutos a medida que este crece. Al centralizar configuraciones como el grupo del proyecto o los par√°metros de ejecuci√≥n de Gradle, no solo ganamos en claridad y orden, sino que sentamos las bases para construir un sistema m√°s coherente, mantenible y f√°cil de escalar.

Lo que aprendiste en esta secci√≥n no es solo una cuesti√≥n de sintaxis o archivos de configuraci√≥n: es una manera de pensar en tu proyecto como un todo, donde cada m√≥dulo sigue reglas comunes, cada decisi√≥n de dise√±o se documenta en la estructura misma del proyecto, y donde la automatizaci√≥n empieza desde lo m√°s b√°sico. Esta forma de trabajar te permitir√° abordar con m√°s confianza los desaf√≠os que vienen, como la modularizaci√≥n, el versionado o la publicaci√≥n de artefactos.

## üìñ Referencias

### üî• Recomendadas

- üåê Configuring the Build Environment. (s.¬†f.). Recuperado 31 de marzo de 2025, de https://docs.gradle.org/current/userguide/build_environment.html
